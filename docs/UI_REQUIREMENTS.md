# UI改善要件書

## 概要

スマートフォン対応を視野に入れたUI改善の要件定義。
PC・スマホ両方で快適に学習できるレスポンシブUIを目指す。

---

## 基本方針

### ターゲットデバイス
- **PC**: デスクトップ・ノートPC（1024px以上）
- **タブレット**: iPad等（768px〜1023px）
- **スマートフォン**: iPhone/Android（〜767px）
- **優先度**: PC・スマホ同等（モバイルファースト設計を採用）

### 将来対応予定
- **PWA化**: 将来検討（オフライン学習対応）
- **ネイティブアプリ**: 検討なし（Web対応で十分）

---

## 改善対象画面と優先度

| 優先度 | 画面 | 現状の課題 |
|-------|------|-----------|
| **1** | メニュー画面 | ボタン配置、情報量のバランス |
| **2** | クイズ画面 | 選択肢タップ領域、問題文の可読性 |
| **3** | 問題一覧 | リスト表示、フィルタUI |
| **4** | 用語集 | 検索UI、展開表示 |
| **5** | 進捗・履歴 | グラフ表示、統計情報 |

---

## 改善項目詳細

### 1. ボタンサイズ

**現状の問題**
- スマホでタップしにくいボタンがある
- タップ領域が視覚的なボタンサイズより小さい

**改善方針**
```
最小タップ領域: 44px × 44px (Apple HIG準拠)
推奨タップ領域: 48px × 48px (Material Design準拠)
ボタン間の最小間隔: 8px
```

**対象コンポーネント**
- [ ] メニューボタン（カテゴリ選択、モード選択）
- [ ] クイズ選択肢ボタン
- [ ] 回答・次へボタン
- [ ] フィルタボタン（問題一覧、用語集）
- [ ] 戻るボタン

---

### 2. 文字サイズ

**現状の問題**
- 固定pxサイズで可読性が端末依存
- 問題文が長い場合の視認性

**改善方針**
```css
/* ベースサイズ */
--font-size-base: 16px;      /* 本文 */
--font-size-sm: 14px;        /* 補足情報 */
--font-size-lg: 18px;        /* 強調テキスト */
--font-size-xl: 24px;        /* 見出し */

/* スマホ時 */
@media (max-width: 767px) {
  --font-size-base: 15px;
  --font-size-lg: 17px;
}
```

**対象箇所**
- [ ] 問題文（現状: 固定サイズ）
- [ ] 選択肢テキスト
- [ ] 解説文
- [ ] 用語説明

---

### 3. レイアウト

**現状の問題**
- max-width: 800px固定でスマホ時に余白が少ない
- 横並びレイアウトがスマホで崩れる箇所あり

**改善方針**

#### ブレークポイント定義
```css
/* Mobile First */
--breakpoint-sm: 576px;   /* 小型スマホ */
--breakpoint-md: 768px;   /* タブレット */
--breakpoint-lg: 1024px;  /* デスクトップ */
--breakpoint-xl: 1280px;  /* 大型デスクトップ */
```

#### コンテナ幅
```css
.app {
  width: 100%;
  max-width: 800px;
  padding: 16px;           /* スマホ */
}

@media (min-width: 768px) {
  .app {
    padding: 24px;         /* タブレット以上 */
  }
}
```

#### 主要レイアウト変更
| 画面 | PC | スマホ |
|------|-----|-------|
| メニューボタン | 2列グリッド | 1列スタック |
| クイズオプション | 横並び | 縦並び |
| 進捗グラフ | 横棒グラフ | 縦棒グラフ検討 |
| 問題一覧フィルタ | 横並びチップ | 折り返し or ドロワー |

---

### 4. ナビゲーション

**現状の問題**
- 戻るボタンの位置が画面により異なる
- 深い階層からトップに戻りにくい

**改善方針**

#### ヘッダー統一
```
┌─────────────────────────────────┐
│ [←] 画面タイトル      [設定][テーマ] │
└─────────────────────────────────┘
```

#### ナビゲーション構造
```
メニュー (トップ)
├── クイズ
│   ├── カテゴリ選択
│   ├── オプション設定
│   └── クイズ実行 → 結果
├── 苦手問題
├── 問題一覧 → 単問クイズ
├── 用語集
├── 進捗確認
└── 履歴
```

#### 改善案
- [ ] 固定ヘッダーの導入
- [ ] パンくずリスト（深い階層時）
- [ ] ホームボタンの常時表示
- [ ] スワイプで戻る（オプション）

---

## 画面別改善仕様

### メニュー画面（優先度1）

**現状**
```
┌─────────────────┐
│    タイトル      │
│   クイックステータス  │
├─────────────────┤
│ [カテゴリ1] [カテゴリ2] │
│ [カテゴリ3] [苦手]    │
│ [一覧] [用語集]      │
│ [進捗] [履歴]       │
└─────────────────┘
```

**改善後（スマホ）**
```
┌─────────────────┐
│ FE学習      [⚙][🌙] │
├─────────────────┤
│ 正答率 75% | 135問  │
├─────────────────┤
│ ▼ カテゴリ別学習     │
│ [テクノロジ系      →] │
│ [マネジメント系    →] │
│ [ストラテジ系      →] │
├─────────────────┤
│ ▼ その他の学習      │
│ [苦手問題 (12問)  →] │
│ [全問題一覧       →] │
├─────────────────┤
│ ▼ 参照・確認       │
│ [用語集] [進捗] [履歴] │
└─────────────────┘
```

**主な変更点**
- セクション分けで情報を整理
- ボタンを全幅に（タップしやすく）
- 苦手問題数を常時表示
- 設定・テーマをヘッダーに移動

---

### クイズ画面（優先度2）

**現状の課題**
- 選択肢ボタンが小さい
- 問題画像が大きすぎる場合がある
- タイマーバーが目立ちすぎ

**改善仕様**
```
┌─────────────────┐
│ [←] 問1/10   [⏱30秒] │
├─────────────────┤
│ テクノロジ系 > 基礎理論 │
│ [難易度: 中]         │
├─────────────────┤
│                   │
│ 問題文テキスト...     │
│                   │
│ [問題画像]          │
│                   │
├─────────────────┤
│ ┌───────────────┐ │
│ │ ア. 選択肢1      │ │
│ └───────────────┘ │
│ ┌───────────────┐ │
│ │ イ. 選択肢2      │ │
│ └───────────────┘ │
│ ...                │
├─────────────────┤
│     [回答する]       │
│   現在: 3/5 正解     │
└─────────────────┘
```

**主な変更点**
- 選択肢ボタンを全幅に
- タップ領域を48px以上確保
- 画像は最大幅100%、高さ制限
- フィードバック時のスクロール考慮

---

## 技術仕様

### CSS設計方針

**現状**: 単一のApp.css（2700行超）

**改善案**: CSS Modules または CSS変数の活用
```
frontend/src/
├── styles/
│   ├── variables.css    # CSS変数定義
│   ├── reset.css        # リセットCSS
│   ├── components/      # コンポーネント別
│   │   ├── Button.css
│   │   ├── Quiz.css
│   │   └── Menu.css
│   └── responsive.css   # メディアクエリ集約
```

### レスポンシブ実装方針

1. **モバイルファースト**: デフォルトスタイルをモバイル向けに
2. **CSS変数活用**: サイズ・色をCSS変数で一元管理
3. **Flexbox/Grid**: レイアウトはFlexbox/CSS Gridで統一
4. **rem単位**: font-sizeはremで相対指定

---

## 実装フェーズ

### Phase 1: 基盤整備 ✅ 完了
- [x] CSS変数の整理・統一（`styles/variables.css` - 60個以上のCSS変数）
- [x] ブレークポイントの定義（`styles/responsive.css` - 576px/768px/1024px）
- [x] アクセシビリティ対応（`styles/reset.css` - フォーカスリング、reduced motion）

### Phase 2: 共通コンポーネント ✅ 完了
- [x] Buttonコンポーネント（variant/size/color/fullWidth/active/loading）
- [x] Cardコンポーネント（variant/padding/clickable）
- [x] CardHeader/CardBody/CardFooterサブコンポーネント

### Phase 3: メニュー画面改善 ✅ 完了
- [x] Menuコンポーネント分離（`components/Menu.tsx`）
- [x] CSS Modules化（`components/Menu.module.css`）
- [x] レスポンシブ対応（タブレット2列、PC3列）
- [x] アクションボタンにアイコン追加

### Phase 4: クイズ画面改善 ✅ 部分完了
- [x] 選択肢ボタン改善（min-height: 56px）
- [x] Quiz.module.css作成（将来の完全移行用）
- [ ] Quiz.tsxのCSS Modules移行（複雑なため延期）

### Phase 5: その他画面 🔲 未着手
- [ ] 問題一覧
- [ ] 用語集
- [ ] 進捗・履歴

### Phase 6: 最終調整・テスト 🔲 未着手
- [ ] クロスブラウザテスト
- [ ] アクセシビリティ監査
- [ ] 古いApp.cssの段階的削除

### Phase 7: PWA対応（将来）
- [ ] Service Worker導入
- [ ] マニフェスト設定
- [ ] オフラインキャッシュ

---

## 参考リソース

- [Apple Human Interface Guidelines](https://developer.apple.com/design/human-interface-guidelines/)
- [Material Design](https://material.io/design)
- [Web Content Accessibility Guidelines (WCAG)](https://www.w3.org/WAI/standards-guidelines/wcag/)

---

## 更新履歴

| 日付 | 内容 |
|------|------|
| 2026/01/15 | 初版作成 |
| 2026/01/16 | Phase 1-4実装進捗を更新 |
